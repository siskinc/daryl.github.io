<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>解决方案 on Daryl&#39;s Blog</title>
    <link>https://siskinc.github.io/tags/%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/</link>
    <description>Recent content in 解决方案 on Daryl&#39;s Blog</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Fri, 17 Dec 2021 21:38:15 +0800</lastBuildDate><atom:link href="https://siskinc.github.io/tags/%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>决策引擎</title>
      <link>https://siskinc.github.io/post/%E5%86%B3%E7%AD%96%E5%BC%95%E6%93%8E/</link>
      <pubDate>Fri, 17 Dec 2021 21:38:15 +0800</pubDate>
      
      <guid>https://siskinc.github.io/post/%E5%86%B3%E7%AD%96%E5%BC%95%E6%93%8E/</guid>
      <description>决策引擎是一种计算机程序，用于计算一个系统的决策。
 目标  提供规则集、决策表、交叉决策表（决策矩阵）、决策树、评分卡、复杂评分卡、规则流等八种类型的业务规则设计工具 并发执行规则  数据库设计 规则  表名称: rules     字段名称 字段类型 描述     id string primary key   created int 创建时间   updated int 更新时间   merchant string 商户   code string 规则编码   type string(enum) 规则类型   information json(dict) 规则信息   name string 规则名称   description string 规则描述    type enum列表  raw - 原始脚本 ruleset - 规则集 normal_score_card - 普通评分卡 complex_score_card - 复杂评分卡 decision_tree - 决策树 decision_table - 决策表 decision_matrix - 决策矩阵  information json字段介绍 type == raw 时的information 1 2 3  { &amp;#34;script&amp;#34;: &amp;#34;string, 脚本字符串&amp;#34; }   type == ruleset 时的information 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33  { &amp;#34;rules&amp;#34;: [ { &amp;#34;name&amp;#34;: &amp;#34;string, 子规则名称&amp;#34;, &amp;#34;description&amp;#34;: &amp;#34;string, 子规则描述&amp;#34;, &amp;#34;rule_group&amp;#34;: { // 树形结构 // type: string(enum), 规则条件类型, enum: expression, logic_expression &amp;#34;type&amp;#34;: &amp;#34;logic_expression&amp;#34;, &amp;#34;op&amp;#34;: &amp;#34;string(enum), 规则操作符, or, and&amp;#34;, &amp;#34;conditions&amp;#34;: [ { &amp;#34;type&amp;#34;: &amp;#34;expression&amp;#34;, &amp;#34;operator&amp;#34;: &amp;#34;string(enum), 表达式操作符, eq, neq, gt, gte, lt, lte, in, nin&amp;#34;, &amp;#34;left_value&amp;#34;: { &amp;#34;type&amp;#34;: &amp;#34;string(enum), 左值类型, variable, constant, function&amp;#34;, &amp;#34;value&amp;#34;: &amp;#34;string, 左值值&amp;#34; }, &amp;#34;right_value&amp;#34;: { &amp;#34;type&amp;#34;: &amp;#34;string(enum), 左值类型, variable, constant, function&amp;#34;, &amp;#34;value&amp;#34;: &amp;#34;string, 左值值&amp;#34; } }, { &amp;#34;type&amp;#34;: &amp;#34;logic_expression&amp;#34;, &amp;#34;op&amp;#34;: &amp;#34;string(enum), 规则操作符, or, and&amp;#34;, &amp;#34;conditions&amp;#34;: [] } ] } } ] }   type == decision_table 时的information 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47  { &amp;#34;table_conditions&amp;#34;: [ { // 树形结构 // type: string(enum), 规则条件类型, enum: expression, logic_expression &amp;#34;type&amp;#34;: &amp;#34;logic_expression&amp;#34;, &amp;#34;op&amp;#34;: &amp;#34;string(enum), 规则操作符, or, and&amp;#34;, &amp;#34;conditions&amp;#34;: [ { &amp;#34;type&amp;#34;: &amp;#34;expression&amp;#34;, &amp;#34;operator&amp;#34;: &amp;#34;string(enum), 表达式操作符, eq, neq, gt, gte, lt, lte, in, nin&amp;#34;, &amp;#34;left_value&amp;#34;: { &amp;#34;type&amp;#34;: &amp;#34;string(enum), 左值类型, variable, constant, function&amp;#34;, &amp;#34;value&amp;#34;: &amp;#34;string, 左值值&amp;#34; }, &amp;#34;right_value&amp;#34;: { &amp;#34;type&amp;#34;: &amp;#34;string(enum), 左值类型, variable, constant, function&amp;#34;, &amp;#34;value&amp;#34;: &amp;#34;string, 左值值&amp;#34; } }, { &amp;#34;type&amp;#34;: &amp;#34;logic_expression&amp;#34;, &amp;#34;op&amp;#34;: &amp;#34;string(enum), 规则操作符, or, and&amp;#34;, &amp;#34;conditions&amp;#34;: [] } ] } ], &amp;#34;table_actions&amp;#34;: [ // type: string(enum), 动作类型, assignment, function { &amp;#34;type&amp;#34;: &amp;#34;assignment&amp;#34;, &amp;#34;field&amp;#34;: &amp;#34;string, 字段路径&amp;#34;, &amp;#34;value&amp;#34;: &amp;#34;string, 写入值&amp;#34; }, { &amp;#34;type&amp;#34;: &amp;#34;function&amp;#34;, &amp;#34;function_name&amp;#34;: &amp;#34;string, 函数名&amp;#34;, &amp;#34;arguments&amp;#34;: [ { &amp;#34;type&amp;#34;: &amp;#34;string(enum), 参数类型, variable, constant&amp;#34;, &amp;#34;value&amp;#34;: &amp;#34;string, 参数值&amp;#34; } ] } ] }   type == decision_matrix 时的information 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52  { // 赋值动作 &amp;#34;action&amp;#34;: { &amp;#34;field&amp;#34;: &amp;#34;string, 字段路径&amp;#34; }, // 表信息 &amp;#34;matrix&amp;#34;: [ [ { &amp;#34;crosswise_conditions&amp;#34;: [ { &amp;#34;type&amp;#34;: &amp;#34;expression&amp;#34;, &amp;#34;operator&amp;#34;: &amp;#34;string(enum), 表达式操作符, eq, neq, gt, gte, lt, lte, in, nin&amp;#34;, &amp;#34;left_value&amp;#34;: { &amp;#34;type&amp;#34;: &amp;#34;string(enum), 左值类型, variable, constant, function&amp;#34;, &amp;#34;value&amp;#34;: &amp;#34;string, 左值值&amp;#34; }, &amp;#34;right_value&amp;#34;: { &amp;#34;type&amp;#34;: &amp;#34;string(enum), 左值类型, variable, constant, function&amp;#34;, &amp;#34;value&amp;#34;: &amp;#34;string, 左值值&amp;#34; } }, { &amp;#34;type&amp;#34;: &amp;#34;logic_expression&amp;#34;, &amp;#34;op&amp;#34;: &amp;#34;string(enum), 规则操作符, or, and&amp;#34;, &amp;#34;conditions&amp;#34;: [] } ], &amp;#34;lengthwise_conditions&amp;#34;: [ { &amp;#34;type&amp;#34;: &amp;#34;expression&amp;#34;, &amp;#34;operator&amp;#34;: &amp;#34;string(enum), 表达式操作符, eq, neq, gt, gte, lt, lte, in, nin&amp;#34;, &amp;#34;left_value&amp;#34;: { &amp;#34;type&amp;#34;: &amp;#34;string(enum), 左值类型, variable, constant, function&amp;#34;, &amp;#34;value&amp;#34;: &amp;#34;string, 左值值&amp;#34; }, &amp;#34;right_value&amp;#34;: { &amp;#34;type&amp;#34;: &amp;#34;string(enum), 左值类型, variable, constant, function&amp;#34;, &amp;#34;value&amp;#34;: &amp;#34;string, 左值值&amp;#34; } }, { &amp;#34;type&amp;#34;: &amp;#34;logic_expression&amp;#34;, &amp;#34;op&amp;#34;: &amp;#34;string(enum), 规则操作符, or, and&amp;#34;, &amp;#34;conditions&amp;#34;: [] } ], &amp;#34;value&amp;#34;: &amp;#34;string, 值&amp;#34; } ] ] }   type == normal_score_card 时的information 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36  { &amp;#34;is_weight&amp;#34;: &amp;#34;boolean, 权重&amp;#34;, &amp;#34;action&amp;#34;: { // 求和方式 &amp;#34;type&amp;#34;: &amp;#34;function&amp;#34;, &amp;#34;function_name&amp;#34;: &amp;#34;string, 函数名称&amp;#34; }, &amp;#34;score_card_table&amp;#34;: { &amp;#34;string, 字段路径&amp;#34;: { &amp;#34;weight&amp;#34;: &amp;#34;int, 权重&amp;#34;, &amp;#34;conditions_and_score&amp;#34;: [ { &amp;#34;conditions&amp;#34;: [ { &amp;#34;type&amp;#34;: &amp;#34;expression&amp;#34;, &amp;#34;operator&amp;#34;: &amp;#34;string(enum), 表达式操作符, eq, neq, gt, gte, lt, lte, in, nin&amp;#34;, &amp;#34;left_value&amp;#34;: { &amp;#34;type&amp;#34;: &amp;#34;string(enum), 左值类型, variable, constant, function&amp;#34;, &amp;#34;value&amp;#34;: &amp;#34;string, 左值值&amp;#34; }, &amp;#34;right_value&amp;#34;: { &amp;#34;type&amp;#34;: &amp;#34;string(enum), 左值类型, variable, constant, function&amp;#34;, &amp;#34;value&amp;#34;: &amp;#34;string, 左值值&amp;#34; } }, { &amp;#34;type&amp;#34;: &amp;#34;logic_expression&amp;#34;, &amp;#34;op&amp;#34;: &amp;#34;string(enum), 规则操作符, or, and&amp;#34;, &amp;#34;conditions&amp;#34;: [] } ], &amp;#34;score&amp;#34;: &amp;#34;int, 分数&amp;#34; } ] } } }   type == complex_score_card 时的information 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39  { &amp;#34;action&amp;#34;: { // 求和方式 &amp;#34;type&amp;#34;: &amp;#34;function&amp;#34;, &amp;#34;function_name&amp;#34;: &amp;#34;string, 函数名称&amp;#34; }, &amp;#34;score_card_table&amp;#34;: [ [ { &amp;#34;string, 字段路径&amp;#34;: { &amp;#34;weight&amp;#34;: &amp;#34;int, 权重&amp;#34;, &amp;#34;conditions_and_score&amp;#34;: [ { &amp;#34;conditions&amp;#34;: [ { &amp;#34;type&amp;#34;: &amp;#34;expression&amp;#34;, &amp;#34;operator&amp;#34;: &amp;#34;string(enum), 表达式操作符, eq, neq, gt, gte, lt, lte, in, nin&amp;#34;, &amp;#34;left_value&amp;#34;: { &amp;#34;type&amp;#34;: &amp;#34;string(enum), 左值类型, variable, constant, function&amp;#34;, &amp;#34;value&amp;#34;: &amp;#34;string, 左值值&amp;#34; }, &amp;#34;right_value&amp;#34;: { &amp;#34;type&amp;#34;: &amp;#34;string(enum), 左值类型, variable, constant, function&amp;#34;, &amp;#34;value&amp;#34;: &amp;#34;string, 左值值&amp;#34; } }, { &amp;#34;type&amp;#34;: &amp;#34;logic_expression&amp;#34;, &amp;#34;op&amp;#34;: &amp;#34;string(enum), 规则操作符, or, and&amp;#34;, &amp;#34;conditions&amp;#34;: [] } ], &amp;#34;score&amp;#34;: &amp;#34;int, 分数&amp;#34; } ] } } ] ] }   type == decision_tree 时的information 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75  { &amp;#34;field&amp;#34;: &amp;#34;string, 字段路径&amp;#34;, &amp;#34;nodes&amp;#34;: [ { &amp;#34;conditions&amp;#34;: [ // 需要执行的条件 { &amp;#34;type&amp;#34;: &amp;#34;expression&amp;#34;, &amp;#34;operator&amp;#34;: &amp;#34;string(enum), 表达式操作符, eq, neq, gt, gte, lt, lte, in, nin&amp;#34;, &amp;#34;left_value&amp;#34;: { &amp;#34;type&amp;#34;: &amp;#34;string(enum), 左值类型, variable, constant, function&amp;#34;, &amp;#34;value&amp;#34;: &amp;#34;string, 左值值&amp;#34; }, &amp;#34;right_value&amp;#34;: { &amp;#34;type&amp;#34;: &amp;#34;string(enum), 左值类型, variable, constant, function&amp;#34;, &amp;#34;value&amp;#34;: &amp;#34;string, 左值值&amp;#34; } }, { &amp;#34;type&amp;#34;: &amp;#34;logic_expression&amp;#34;, &amp;#34;op&amp;#34;: &amp;#34;string(enum), 规则操作符, or, and&amp;#34;, &amp;#34;conditions&amp;#34;: [] } ], &amp;#34;alise&amp;#34;: { // type: string(enum), enum: leaf_node(叶子节点), non_leaf_node(非叶子节点) &amp;#34;type&amp;#34;: &amp;#34;string(enum), enum: leaf_node&amp;#34;, &amp;#34;action&amp;#34;: [ // type: string(enum), 动作类型, assignment, function { &amp;#34;type&amp;#34;: &amp;#34;assignment&amp;#34;, &amp;#34;field&amp;#34;: &amp;#34;string, 字段路径&amp;#34;, &amp;#34;value&amp;#34;: &amp;#34;string, 写入值&amp;#34; }, { &amp;#34;type&amp;#34;: &amp;#34;function&amp;#34;, &amp;#34;function_name&amp;#34;: &amp;#34;string, 函数名&amp;#34;, &amp;#34;arguments&amp;#34;: [ { &amp;#34;type&amp;#34;: &amp;#34;string(enum), 参数类型, variable, constant&amp;#34;, &amp;#34;value&amp;#34;: &amp;#34;string, 参数值&amp;#34; } ] } ] } }, { &amp;#34;conditions&amp;#34;: [ // 需要执行的条件 { &amp;#34;type&amp;#34;: &amp;#34;expression&amp;#34;, &amp;#34;operator&amp;#34;: &amp;#34;string(enum), 表达式操作符, eq, neq, gt, gte, lt, lte, in, nin&amp;#34;, &amp;#34;left_value&amp;#34;: { &amp;#34;type&amp;#34;: &amp;#34;string(enum), 左值类型, variable, constant, function&amp;#34;, &amp;#34;value&amp;#34;: &amp;#34;string, 左值值&amp;#34; }, &amp;#34;right_value&amp;#34;: { &amp;#34;type&amp;#34;: &amp;#34;string(enum), 左值类型, variable, constant, function&amp;#34;, &amp;#34;value&amp;#34;: &amp;#34;string, 左值值&amp;#34; } }, { &amp;#34;type&amp;#34;: &amp;#34;logic_expression&amp;#34;, &amp;#34;op&amp;#34;: &amp;#34;string(enum), 规则操作符, or, and&amp;#34;, &amp;#34;conditions&amp;#34;: [] } ], &amp;#34;alise&amp;#34;: { // type: string(enum), enum: leaf_node(叶子节点), non_leaf_node(非叶子节点) &amp;#34;type&amp;#34;: &amp;#34;string(enum), enum: non_leaf_node&amp;#34;, &amp;#34;field&amp;#34;: &amp;#34;string, 字段路径&amp;#34;, &amp;#34;nodes&amp;#34;: [] } } ] }   决策流  表名称: decision_flow     字段名称 字段类型 描述     id string primary key   created int 创建时间   updated int 更新时间   merchant string 商户   code string 决策流编码   name string 决策流名称   description string 决策流描述    决策流-规则节点  表名称: decision_flow_node     字段名称 字段类型 描述     id string primary key   created int 创建时间   updated int 更新时间   merchant string 商户   decision_flow_code string 决策流编码   rule_code string 规则编码   next_node list[string] 下一步规则节点编码列表   name string 规则节点名称   description string 规则节点描述    数据库图 接口文档 规则 创建 Request  Method: POST URL: /v1/rule Headers: Content-Type: application/json  Body 1 2 3 4 5 6 7 8 9 10 11 12  { &amp;#34;data_list&amp;#34;: [ { &amp;#34;merchant&amp;#34;: &amp;#34;string, 商户号&amp;#34;, &amp;#34;code&amp;#34;: &amp;#34;string, 规则编码&amp;#34;, &amp;#34;type&amp;#34;: &amp;#34;string(enum), 规则类型&amp;#34;, &amp;#34;information&amp;#34;: &amp;#34;json(dict), 规则信息, 根据type进行变化&amp;#34;, &amp;#34;name&amp;#34;: &amp;#34;string, 规则名称&amp;#34;, &amp;#34;description&amp;#34;: &amp;#34;string, 规则描述&amp;#34; } ] }   Response 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16  { &amp;#34;data&amp;#34;: [ { &amp;#34;data&amp;#34;: { &amp;#34;id&amp;#34;: &amp;#34;string, 主键&amp;#34;, &amp;#34;created&amp;#34;: &amp;#34;int, 创建时间&amp;#34;, &amp;#34;updated&amp;#34;: &amp;#34;int, 更新时间&amp;#34; // 其余全量数据 }, &amp;#34;msg&amp;#34;: &amp;#34;success&amp;#34;, &amp;#34;code&amp;#34;: 0 } ], &amp;#34;msg&amp;#34;: &amp;#34;success&amp;#34;, &amp;#34;code&amp;#34;: 0 }   描述  无</description>
    </item>
    
  </channel>
</rss>
